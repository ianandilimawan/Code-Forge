# Laravel Generator Package

A modern Laravel CRUD generator package for Laravel 12 with Tailwind CSS support. This package allows you to generate complete CRUD operations with a single command.

## Installation

Install the package via Composer:

```bash
composer require ianandilimawan/code-forge
```

The package will be automatically discovered by Laravel 12.

### Publish Assets

After installation, publish all assets (migrations, seeders, models, services, components, and stubs):

```bash
php artisan vendor:publish --tag=laravel-generator
```

Or publish specific assets:

```bash
# Publish migrations only
php artisan vendor:publish --tag=laravel-generator-migrations

# Publish seeders only
php artisan vendor:publish --tag=laravel-generator-seeders

# Publish models only
php artisan vendor:publish --tag=laravel-generator-models

# Publish services only
php artisan vendor:publish --tag=laravel-generator-services

# Publish components only
php artisan vendor:publish --tag=laravel-generator-components

# Publish stubs only
php artisan vendor:publish --tag=laravel-generator-stubs
```

### Run Migrations and Seeders

After publishing, run migrations and seeders:

```bash
php artisan migrate
php artisan db:seed --class=RolePermissionSeeder
php artisan db:seed --class=MenuSeeder
```

## Features

- Generate complete CRUD operations with a single command
- Support for various field types (text, textarea, select, checkbox, date, email, password, number, file)
- Modern Tailwind CSS templates
- JSON schema support for complex field definitions
- Validation rules generation
- Optional migration generation (use `--migration` flag)
- Model, Controller, Request, and View generation
- **Automatic unit test generation** (enabled by default)
- Route registration
- Support for generating from existing database tables
- ENUM field support with automatic select dropdowns
- Rich text editor (TinyMCE) for textarea fields
- Switch components for boolean fields
- Currency formatting support

## Usage

### Quick Start

**From Existing Database Table:**

```bash
php artisan generate:scaffold {ModelName} --fromTable --tableName={table_name}
```

**From Field Definitions:**

```bash
php artisan generate:scaffold {ModelName} --fields="field1:type:htmlType:options"
```

**From JSON Schema:**

```bash
php artisan generate:scaffold {ModelName} --schema=path/to/schema.json
```

### Generate from Existing Database Table

Generate CRUD from an existing database table:

```bash
php artisan generate:scaffold Blog --fromTable --tableName=blog
```

This will:

- Read the table structure from the database
- Automatically detect column types (int, varchar, text, json, date, etc.)
- **Detect ENUM fields and generate select dropdowns with proper options**
- Generate Model with proper fillable and casts
- Generate Controller, Request, Views
- **Skip migration generation by default** (use `--migration` flag to generate migration)
- Skip Menu/Permissions if tables don't exist

### Generate from Fields

Generate CRUD for a model with field definitions:

```bash
php artisan generate:scaffold Product --fields="name:string:text:required,description:text:textarea:nullable,price:decimal:number:required"
```

### Generate from JSON Schema

Create a schema file in `resources/schemas/` with your field definitions:

```json
{
  "model": "Product",
  "fields": [
    {
      "name": "name",
      "dbType": "string",
      "htmlType": "text",
      "validation": ["required", "string", "max:255"],
      "searchable": true,
      "sortable": true
    },
    {
      "name": "description",
      "dbType": "text",
      "htmlType": "textarea",
      "validation": ["nullable", "string"]
    },
    {
      "name": "price",
      "dbType": "decimal",
      "htmlType": "number",
      "validation": ["required", "numeric", "min:0"]
    }
  ]
}
```

Then generate using the schema:

```bash
php artisan generate:scaffold Product --schema=resources/schemas/product.json
```

### Command Options

- `--migration` - Generate migration file (migration is **not generated by default**)
- `--no-migration` - Skip migration generation (default behavior)
- `--no-controller` - Skip controller generation
- `--no-model` - Skip model generation
- `--no-views` - Skip views generation
- `--no-request` - Skip request generation
- `--no-routes` - Skip routes generation
- `--no-menu` - Skip menu generation
- `--no-permissions` - Skip permissions generation
- `--no-test` - Skip test generation (tests are **generated by default**)
- `--with-factory` - Generate factory
- `--with-seeder` - Generate seeder
- `--with-test` - Generate test (default behavior)
- `--section-title=` - Section title for the menu

## Generated Files

The generator creates the following files:

- **Model**: `app/Models/{ModelName}.php`
- **Controller**: `app/Http/Controllers/{ModelName}Controller.php`
- **Request**: `app/Http/Requests/{ModelName}Request.php`
- **Migration**: `database/migrations/{timestamp}_create_{table_name}_table.php` (only if `--migration` flag is used)
- **Views**: `resources/views/{model_name}s/index.blade.php`, `create.blade.php`, `edit.blade.php`, `show.blade.php`
- **Test**: `tests/Feature/{ModelName}Test.php` (generated by default, use `--no-test` to skip)
- **Routes**: Added to `routes/web.php`

## Customization

### Publishing Stubs

You can publish the stubs to customize the generated templates:

```bash
php artisan vendor:publish --tag=laravel-generator-stubs
```

This will publish the stubs to `resources/stubs/laravel-generator/` where you can customize them.

## Requirements

- Laravel 12+
- PHP 8.2+
- Tailwind CSS (for styling)

## License

MIT License

## Author

Ian Andi Limawan

## Support

For issues and questions, please open an issue on GitHub.
